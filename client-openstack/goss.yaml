############
# Packages #
############

package:
  su-exec:
    installed: true
  bash:
    installed: true

############
# Commands #
############

command:
  # Python
  python --version:
    exit-status: 0
    stdout:
      - {{ .Env.PYTHON_VERSION }}
  # Pip packages
  pip list:
    exit-status: 0
    stdout:
      - python-openstackclient ({{ .Env.OPENSTACK_CLIENT_VERSION }})
      - python-neutronclient ({{ .Env.NEUTRON_CLIENT_VERSION }})
      - python-swiftclient ({{ .Env.SWIFT_CLIENT_VERSION }})
  # Openstack
  openstack --version:
    exit-status: 0
    stdout:
      - openstack {{ .Env.OPENSTACK_CLIENT_VERSION }}
  # Neutron
  neutron --version:
    exit-status: 0
    stdout:
      - {{ .Env.NEUTRON_CLIENT_VERSION }}
  # Swift
  swift --version:
    exit-status: 0
    stdout:
      - python-swiftclient {{ .Env.SWIFT_CLIENT_VERSION }}

##########
# Groups #
##########

group:
  {{ .Env.GROUP_DEFAULT }}:
    exists: true
    gid:    {{ .Env.GROUP_ID }}

#########
# Users #
#########

user:
  {{ .Env.USER_DEFAULT }}:
    exists: true
    uid:    {{ .Env.USER_ID }}
    groups:
      - {{ .Env.GROUP_DEFAULT }}
    home:  /home/{{ .Env.USER_DEFAULT }}
    shell: /bin/sh
