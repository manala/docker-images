#!/bin/bash

VERSION=${SOURCE_BRANCH}
VERSION_MINOR=${VERSION%.*}
VERSION_MAJOR=${VERSION_MINOR%.*}

# Version
docker tag $IMAGE_NAME $DOCKER_REPO:$VERSION-$DOCKER_TAG
docker push $DOCKER_REPO:$VERSION-$DOCKER_TAG

# Version - Minor
docker tag $IMAGE_NAME $DOCKER_REPO:$VERSION_MINOR-$DOCKER_TAG
docker push $DOCKER_REPO:$VERSION_MINOR-$DOCKER_TAG

# Version - Major
docker tag $IMAGE_NAME $DOCKER_REPO:$VERSION_MAJOR-$DOCKER_TAG
docker push $DOCKER_REPO:$VERSION_MAJOR-$DOCKER_TAG
